# =============================================================================
# HuLa Matrix Environment Configuration
# =============================================================================

# ========== 基础配置 ==========

# 应用名称
VITE_APP_NAME="HuLa"

# GitHub 仓库地址
VITE_PC_URL="https://github.com/HuLaSpark/HuLa"

# 服务端仓库地址
VITE_SERVICE_URL="https://github.com/HuLaSpark/HuLa-Server"

# ========== Matrix 核心配置 ==========

# 总开关：启用 Matrix 集成
VITE_MATRIX_ENABLED=on

# 服务器名称（域名），通过 .well-known 服务发现获取真实 homeserver 地址
# 系统会通过 https://cjystx.top/.well-known/matrix/client 发现真实的 homeserver
VITE_MATRIX_SERVER_NAME=cjystx.top

# 注意：不要设置 VITE_MATRIX_BASE_URL！
# 如果设置了 VITE_MATRIX_BASE_URL，将跳过服务发现直接使用该 URL
# 正确的流程是：
#   1. 使用 VITE_MATRIX_SERVER_NAME (cjystx.top)
#   2. 通过 .well-known 服务发现
#   3. 自动获取真实的 homeserver URL (https://matrix.cjystx.top)

# ========== 功能模块开关 ==========

# 房间/消息模块
VITE_MATRIX_ROOMS_ENABLED=on

# 媒体上传与 MXC 解析（Phase 1: 启用）
VITE_MATRIX_MEDIA_ENABLED=on

# 推送通知映射
VITE_MATRIX_PUSH_ENABLED=off

# 端到端加密（已完整实现，可安全启用）
VITE_MATRIX_E2EE_ENABLED=on

# RTC/通话（已完整实现，可安全启用）
VITE_MATRIX_RTC_ENABLED=on

# RTC 通话铃声 URL（可自定义铃声文件路径）
VITE_RTC_CALL_BELL_URL=/sound/hula_bell.mp3

# RTC ICE 服务器配置（可选，用于自定义 STUN/TURN 服务器）
# STUN 服务器列表，逗号分隔（不填则使用 Matrix 提供的 TURN 服务器和默认 STUN）
VITE_RTC_STUN_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302
# TURN 服务器列表，逗号分隔（需要配合用户名和密码使用）
VITE_RTC_TURN_SERVERS=turn:your-turn-server.com:3478,turn:your-turn-server2.com:3478
# TURN 服务器认证信息
VITE_RTC_TURN_USERNAME=your-username
VITE_RTC_TURN_PASSWORD=your-password

# 管理能力（权限/目录/别名 - 已完整实现，可安全启用）
VITE_MATRIX_ADMIN_ENABLED=on

# Sliding Sync (MSC3575) - 下一代同步协议
# 注意：需要 Matrix homeserver 支持或使用 Sliding Sync 代理
VITE_MATRIX_SLIDING_SYNC_ENABLED=off

# Sliding Sync 代理 URL（如果 homeserver 不原生支持）
# 格式：https://sslip.io:8443 或完整的代理服务器地址
VITE_MATRIX_SLIDING_SYNC_PROXY=

# 强制同步模式（可选：sliding-sync, traditional, hybrid）
# 留空则自动检测服务器能力并选择最佳模式
VITE_MATRIX_SYNC_MODE=

# ========== 扩展功能 ==========

# Synapse 好友扩展
VITE_SYNAPSE_FRIENDS_ENABLED=on

# ========== Phase 1 迁移配置 ==========

# 禁用自定义WebSocket，完全使用Matrix标准协议
VITE_DISABLE_WEBSOCKET=true

# 消息处理迁移到Matrix SDK
VITE_MIGRATE_MESSAGING=true

# Phase 1: 是否要求Matrix登录成功 (false=允许仅自定义后端登录)
VITE_REQUIRE_MATRIX_LOGIN=false

# Phase 1: 允许在Matrix登录失败时继续登录 (用于迁移期间)
VITE_ALLOW_LOGIN_WITHOUT_MATRIX=true

# 移动端高级特性（默认关闭，减少桌面构建压力）
VITE_MOBILE_FEATURES_ENABLED=off

# ========== 移动端细粒度功能开关 ==========

# UI 特性
VITE_MOBILE_PULL_TO_REFRESH=on
VITE_MOBILE_LONG_PRESS_MENUS=on
VITE_MOBILE_SWIPE_GESTURES=on
VITE_MOBILE_HAPTIC_FEEDBACK=on
VITE_MOBILE_SAFE_AREA_INSET=on

# 性能优化
VITE_MOBILE_IMAGE_CACHE=on
VITE_MOBILE_VIRTUAL_SCROLL=on
VITE_MOBILE_IMAGE_LAZY_LOAD=on

# 移动端 Matrix 功能
VITE_MOBILE_MATRIX_SPACES=off
VITE_MOBILE_MATRIX_ROOM_SEARCH=off
VITE_MOBILE_MATRIX_E2EE_SETTINGS=off
VITE_MOBILE_MATRIX_ADVANCED_ROOM_SETTINGS=off

# ========== 开发配置 ==========

# 开发辅助：在启动时进行开发同步（默认关闭）
VITE_MATRIX_DEV_SYNC=false

# 开发辅助：启用性能监控（默认关闭，开启后可能影响开发性能）
VITE_DEV_PERF=false

# ========== 认证信息 ==========

# Matrix 认证信息（仅用于开发演示，生产请通过登录流程获取）
# 警告：请勿将真实 Token 提交到 Git
VITE_MATRIX_ACCESS_TOKEN=
VITE_MATRIX_USER_ID=

# ========== 开发工具 ==========

# Gitee Token（用于版本更新检查）
# 警告：请勿将真实 Token 提交到 Git，请在部署时通过环境变量设置
# 获取方式：登录 Gitee -> 设置 -> 私人令牌 -> 生成新令牌（需要 repo 权限）
VITE_GITEE_TOKEN=

# ========== 性能监控（生产环境） ==========

# 性能数据上报端点（可选，用于生产环境性能监控）
# VITE_PERFORMANCE_ENDPOINT=https://your-monitoring-server.com/api/performance

# ========== 说明 ==========
# - 布尔开关支持 on/off/true/false/1/0/yes/no，多数开关默认关闭以便灰度
# - VITE_MATRIX_SERVER_NAME 是域名，通过 .well-known 服务发现获取真实 homeserver 地址
# - TURN/STUN 凭证由 Homeserver `/_matrix/client/v3/voip/turnServer` 提供，无需额外环境变量
# - 启动时将输出开关摘要与配置验证结果，便于快速校验
# - VITE_DEV_PERF=true 在开发环境启用性能监控（默认关闭以保持良好开发性能）
# - 配置依赖关系会自动检测，错误配置会显示警告和建议
