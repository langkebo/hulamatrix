/* ==========================================================================
   Color Tokens - 颜色系统
   ========================================================================== */

@use 'sass:map';
@use 'sass:string';

// PC端颜色 - 深色主题
$pc-dark: (
  bg-primary: var(--hula-brand-primary),      // 左侧导航背景
  bg-secondary: var(--hula-brand-primary),    // 中间列表背景
  bg-tertiary: var(--hula-brand-primary),     // 右侧聊天背景
  bg-elevated: var(--hula-brand-primary),     // 卡片/弹窗背景
  bg-hover: var(--hula-brand-primary),        // 悬停背景
  bg-active: var(--hula-brand-primary),       // 激活背景

  text-primary: var(--hula-brand-primary),    // 主要文字
  text-secondary: var(--hula-brand-primary),  // 次要文字
  text-tertiary: var(--hula-brand-primary),   // 辅助文字
  text-disabled: var(--hula-brand-primary),   // 禁用文字
  text-hint: var(--hula-brand-primary),       // 提示文字

  accent-primary: var(--hula-brand-primary),  // 主强调色(亮绿)
  accent-hover: var(--hula-brand-primary),    // 悬停状态
  accent-active: var(--hula-brand-primary),   // 激活状态
  accent-subtle: var(--hula-brand-primary),   // 柔和强调

  success: var(--hula-brand-primary),         // 成功
  warning: var(--hula-brand-primary),         // 警告
  error: var(--hula-brand-primary),           // 错误
  info: var(--hula-brand-primary),            // 信息

  bubble-sent: var(--hula-brand-primary),     // 发送气泡
  bubble-sent-text: var(--hula-brand-primary),// 发送文字
  bubble-received: var(--hula-brand-primary), // 接收气泡
  bubble-received-text: var(--hula-brand-primary), // 接收文字

  border-color: var(--hula-brand-primary),    // 边框颜色
  divider-color: var(--hula-brand-primary),   // 分割线颜色

  scrollbar-track: rgba(74, 74, 74, 0.3),
  scrollbar-thumb: var(--hula-brand-primary),
  scrollbar-thumb-hover: var(--hula-brand-primary),
);

// 移动端颜色 - 浅色主题
$mobile-light: (
  bg-primary: var(--hula-brand-primary),      // 主背景(薄荷绿)
  bg-secondary: var(--hula-brand-primary),    // 次级背景(白色)
  bg-tertiary: var(--hula-brand-primary),     // 第三级背景
  bg-elevated: var(--hula-brand-primary),     // 卡片背景
  bg-hover: var(--hula-brand-primary),        // 悬停背景
  bg-active: var(--hula-brand-primary),       // 激活背景

  text-primary: var(--hula-brand-primary),    // 主要文字
  text-secondary: var(--hula-brand-primary),  // 次要文字
  text-tertiary: var(--hula-brand-primary),   // 辅助文字
  text-disabled: var(--hula-brand-primary),   // 禁用文字
  text-hint: var(--hula-brand-primary),       // 提示文字

  accent-primary: var(--hula-brand-primary),  // 主强调色(绿色)
  accent-hover: var(--hula-brand-primary),    // 悬停状态
  accent-active: var(--hula-brand-primary),   // 激活状态
  accent-subtle: var(--hula-brand-primary),   // 柔和强调

  success: var(--hula-brand-primary),         // 成功
  warning: var(--hula-brand-primary),         // 警告
  error: var(--hula-brand-primary),           // 错误
  info: var(--hula-brand-primary),            // 信息

  bubble-sent: var(--hula-brand-primary),     // 发送气泡
  bubble-sent-text: var(--hula-brand-primary),// 发送文字
  bubble-received: var(--hula-brand-primary), // 接收气泡
  bubble-received-text: var(--hula-brand-primary), // 接收文字

  border-color: var(--hula-brand-primary),    // 边框颜色
  divider-color: var(--hula-brand-primary),   // 分割线颜色

  scrollbar-track: rgba(var(--hula-black-rgb), 0.05),
  scrollbar-thumb: var(--hula-brand-primary),
  scrollbar-thumb-hover: var(--hula-brand-primary),
);

// 浅色主题(备用)
$light: (
  bg-primary: var(--hula-brand-primary),
  bg-secondary: var(--hula-brand-primary),
  bg-tertiary: var(--hula-brand-primary),
  bg-elevated: var(--hula-brand-primary),

  text-primary: var(--hula-brand-primary),
  text-secondary: var(--hula-brand-primary),
  text-tertiary: var(--hula-brand-primary),
  text-disabled: var(--hula-brand-primary),

  accent-primary: var(--hula-brand-primary),
  accent-hover: var(--hula-brand-primary),
  accent-active: var(--hula-brand-primary),

  bubble-sent: var(--hula-brand-primary),
  bubble-sent-text: var(--hula-brand-primary),
  bubble-received: var(--hula-brand-primary),
  bubble-received-text: var(--hula-brand-primary),
);

@mixin export($theme) {
  $colors: if($theme == 'dark', $pc-dark, if($theme == 'mobile', $mobile-light, $light));
  $prefix: if($theme == 'mobile', 'mobile', if($theme == 'dark', 'pc', ''));

  @each $name, $value in $colors {
    --#{$prefix}-#{to-kebab-case($name)}: #{$value};
  }
}

// 辅助函数：转换为kebab-case
@function to-kebab-case($string) {
  $string: str-replace($string, '_', '-');
  @return $string;
}

@function str-replace($string, $search, $replace: '') {
  $index: string.index($string, $search);
  @if $index {
    @return string.slice($string, 1, $index - 1) + $replace + str-replace(string.slice($string, $index + string.length($search)), $search, $replace);
  }
  @return $string;
}
