/* ==========================================================================
   修复聊天界面显示问题
   ========================================================================== */

/* 确保聊天容器有正确的背景和高度 */
.chat-container,
.chat-box,
.chat-wrapper {
  min-height: 100% !important;
  height: 100% !important;
  background: var(--right-theme-bg-color, rgba(var(--hula-white-rgb), 0.9)) !important;
}

/* 主布局容器 */
#layout {
  min-height: 100vh;
  background: var(--app-bg-gradient) !important;
}

/* 右侧面板 */
.right-panel,
.layout-right {
  background: var(--right-theme-bg-color, rgba(var(--hula-white-rgb), 0.9)) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-left: 1px solid rgba(var(--hula-brand-rgb), 0.2);
  position: relative;
  z-index: 1;
}

/* 确保聊天组件容器可见 */
.chat-integration,
.chat-integration > * {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  min-height: 0 !important;
}

/* 聊天头部 */
.chat-header {
  background: var(--matrix-bg-primary, rgba(var(--hula-white-rgb), 0.95)) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--matrix-border, rgba(var(--hula-brand-rgb), 0.2));
  z-index: 10;
}

/* 聊天主体 */
.chat-main,
.chat-messages {
  background: transparent !important;
  flex: 1 !important;
  overflow-y: auto;
}

/* 聊天输入区域 */
.chat-footer,
.chat-input-container {
  background: var(--matrix-bg-primary, rgba(var(--hula-white-rgb), 0.95)) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-top: 1px solid var(--matrix-border, rgba(var(--hula-brand-rgb), 0.2));
  padding: 16px;
}

/* 深色模式适配 */
html[data-theme='dark'] {
  .right-panel,
  .layout-right {
    background: var(--right-theme-bg-color, rgba(var(--hula-gray-900-rgb), 0.9)) !important;
    color: white;
  }

  .chat-header,
  .chat-footer {
    background: var(--matrix-bg-primary, rgba(var(--hula-gray-900-rgb), 0.95)) !important;
    color: white;
  }

  .chat-messages {
    color: white;
  }
}

/* 覆盖可能隐藏元素的样式 */
.chat-container[style*="display: none"],
.chat-box[style*="display: none"] {
  display: flex !important;
}

/* 确保消息列表容器可见 */
.message-list,
.messages-container {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* 加载状态修复 */
.loading-state {
  background: var(--right-theme-bg-color, rgba(var(--hula-white-rgb), 0.9)) !important;
  display: flex !important;
  align-items: center;
  justify-content: center;
}

/* Naive UI 组件背景修复 */
.n-card,
.n-drawer-body {
  background: var(--matrix-bg-primary, rgba(var(--hula-white-rgb), 0.95)) !important;
}

html[data-theme='dark'] {
  .n-card,
  .n-drawer-body {
    background: var(--matrix-bg-primary, rgba(var(--hula-gray-900-rgb), 0.95)) !important;
    color: white;
  }
}