@use 'fonts';

/* ==========================================================================
   CSS VARIABLES - 设计系统基础
   ========================================================================== */

:root {
  /* ==========================================================================
      过渡动画定义
     ========================================================================== */
  --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);

  /* ==========================================================================
      主色调系统
     ========================================================================== */
  --primary-color: var(--hula-brand-primary);
  --primary-hover: rgba(19, 152, 127, 0.8);
  --primary-active: rgba(19, 152, 127, 0.4);
  --primary-light: var(--hula-brand-primary);

  /* ==========================================================================
      背景色系统
     ========================================================================== */
  --app-bg-color: var(--hula-brand-primary);
  --center-bg-color: var(--hula-white);
  --right-bg-color: var(--hula-brand-primary);
  --left-bg-color: var(--hula-brand-primary);

  /* 左侧导航栏图标颜色 */
  --left-icon-color: var(--hula-gray-700);
  --left-win-icon-color: var(--hula-brand-primary);
  --left-active-bg-color: rgba(19, 152, 127, 0.1);
  --left-active-icon-color: var(--hula-brand-primary);
  --left-bg-hover: rgba(var(--hula-black-rgb), 0.05);
  --left-active-hover: var(--hula-brand-primary);

  /* ==========================================================================
      文字色系统
     ========================================================================== */
  --text-primary: var(--hula-brand-primary);
  --text-secondary: var(--hula-gray-700);
  --text-tertiary: var(--hula-gray-400);
  --text-disabled: var(--hula-brand-primary);
  --text-color: var(--text-primary); /* 向后兼容 */

  /* ==========================================================================
      边框色系统
     ========================================================================== */
  --border-color: var(--hula-brand-primary);
  --border-light: var(--hula-brand-primary);
  --border-hover: var(--hula-brand-primary);

  /* ==========================================================================
      间距系统
     ========================================================================== */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 16px;
  --spacing-xl: 24px;
  --spacing-xxl: 32px;
  --spacing-xxxl: 48px;

  /* ==========================================================================
      圆角系统
     ========================================================================== */
  --radius-xs: 2px;
  --radius-sm: 4px;
  --radius-md: 6px; /* 主要圆角 */
  --radius-lg: 8px;
  --radius-xl: 12px;
  --radius-2xl: 16px;

  /* ==========================================================================
      阴影系统
     ========================================================================== */
  --shadow-enabled: 1;
  --shadow-sm: 0 1px 3px rgba(var(--hula-black-rgb), 0.08);
  --shadow-md: 0 4px 6px rgba(var(--hula-black-rgb), 0.08);
  --shadow-lg: 0 10px 25px rgba(var(--hula-black-rgb), 0.1);
  --shadow-box-color: rgba(var(--hula-black-rgb), 0.08);

  /* ==========================================================================
      字体系统 - Phase 4 优化
      使用系统字体优先以优化首屏加载
     ========================================================================== */
  --font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Segoe UI', sans-serif;
  --font-size-xs: 12px;
  --font-size-sm: 14px;
  --font-size-md: 16px;
  --font-size-lg: 18px;
  --font-size-xl: 20px;
  --font-size-2xl: 24px;

  /* ==========================================================================
      状态色系统
     ========================================================================== */
  --success-color: var(--hula-brand-primary);
  --success-bg: rgba(40, 167, 69, 0.1);

  --warning-color: var(--hula-brand-primary);
  --warning-bg: rgba(247, 182, 104, 0.1);

  --danger-color: var(--hula-brand-primary);
  --danger-bg: rgba(193, 64, 83, 0.1);

  --info-color: var(--hula-brand-primary);
  --info-bg: rgba(23, 162, 184, 0.1);

  /* ==========================================================================
      交互状态
     ========================================================================== */
  --bg-hover: rgba(19, 152, 127, 0.05);
  --bg-selected: rgba(19, 152, 127, 0.1);
  --bg-active: rgba(19, 152, 127, 0.15);
  --bg-disabled: var(--hula-brand-primary);

  /* ==========================================================================
      组件特定变量
     ========================================================================== */

  /* 按钮系统 */
  --button-bg: var(--primary-color);
  --button-bg-hover: var(--primary-hover);
  --button-bg-active: var(--primary-active);
  --button-text: var(--hula-white);
  --button-height: 36px;
  --button-height-lg: 40px;
  --button-height-sm: 32px;

  /* 输入框系统 */
  --input-bg: var(--hula-white);
  --input-bg-disabled: var(--hula-brand-primary);
  --input-border: var(--border-color);
  --input-border-hover: var(--primary-color);
  --input-border-focus: var(--primary-color);
  --input-padding-x: var(--spacing-md);
  --input-padding-y: var(--spacing-sm);
  --input-height: 36px;

  /* 搜索框 */
  --search-bg-color: var(--hula-brand-primary);
  --search-placeholder: var(--hula-gray-400);

  /* 消息系统 */
  --msg-list-bg: var(--hula-white);
  --msg-hover: var(--hula-brand-primary);
  --msg-active: var(--primary-color);
  --msg-active-text: var(--hula-white);

  /* 聊天气泡 */
  --chat-bubble-max-width: clamp(240px, 32vw, 720px);
  --chat-bubble-padding-x: clamp(10px, 2vw, 16px);
  --chat-bubble-padding-y: clamp(6px, 1.2vw, 10px);
  --chat-bubble-radius: clamp(14px, 2vw, 18px);
  --chat-left-bg: var(--hula-brand-primary);
  --chat-right-bg: var(--hula-brand-primary);
  --chat-text-color: var(--hula-brand-primary);

  /* 头像系统 */
  --avatar-xs: 24px;
  --avatar-sm: 32px;
  --avatar-md: 40px;
  --avatar-lg: 56px;
  --avatar-xl: 80px;
  --avatar-2xl: 120px;
  --avatar-border-color: var(--hula-white);

  /* 弹窗系统 */
  --modal-bg: rgba(var(--hula-black-rgb), 0.5);
  --popover-bg: var(--hula-white);
  --tooltip-bg: rgba(var(--hula-black-rgb), 0.8);
  --tooltip-text: var(--hula-white);

  /* 菜单系统 */
  --menu-bg: linear-gradient(45deg, rgba(var(--hula-white-rgb), 0.45) 40%, rgba(var(--hula-white-rgb), 0.65) 60%);
  --menu-item-height: 36px;
  --menu-item-padding-x: var(--spacing-md);
  --menu-hover: rgba(10, 20, 28, 0.1);

  /* 图标系统 */
  --icon-color: var(--hula-black);
  --icon-color-hover: var(--primary-color);
  --icon-color-disabled: var(--text-disabled);
  --icon-size-xs: 14px;
  --icon-size-sm: 16px;
  --icon-size-md: 20px;
  --icon-size-lg: 24px;

  /* 特殊用途 */
  --blur-enabled: 1;
  --caret-color: var(--primary-color);
  --selection-bg: rgba(19, 152, 127, 0.3);

  /* 响应式尺寸 */
  --sz-avatar-xl: clamp(96px, 25vw, 146px);
  --sz-avatar-lg: clamp(80px, 22vw, 106px);
  --pad-container-x: clamp(16px, 3vw, 40px);
  --touch-min-h: clamp(44px, 6vh, 56px);
  --sz-chat-input-min-h: clamp(36px, 6vh, 62px);
  --sz-chat-input-pad-x: clamp(8px, 1.5vw, 16px);
  --sz-chat-input-pad-y: clamp(4px, 1vh, 8px);
}

/* ==========================================================================
   暗色主题
   ========================================================================== */

html[data-theme='dark'] {
  /* 背景色系统 */
  --app-bg-color: var(--hula-brand-primary);
  --center-bg-color: var(--hula-brand-primary);
  --right-bg-color: var(--hula-brand-primary);
  --left-bg-color: var(--hula-brand-primary);

  /* 左侧导航栏图标颜色 - 暗色主题 */
  --left-icon-color: #ccc;
  --left-win-icon-color: var(--hula-brand-primary);
  --left-active-bg-color: rgba(79, 209, 199, 0.2);
  --left-active-icon-color: var(--hula-brand-primary);
  --left-bg-hover: rgba(var(--hula-white-rgb), 0.1);
  --left-active-hover: var(--hula-brand-primary);

  /* 文字色系统 */
  --text-primary: var(--hula-white);
  --text-secondary: #ccc;
  --text-tertiary: var(--hula-gray-400);
  --text-disabled: var(--hula-brand-primary);

  /* 边框色系统 */
  --border-color: var(--hula-brand-primary);
  --border-light: var(--hula-gray-900);

  /* 阴影系统 */
  --shadow-box-color: rgba(var(--hula-black-rgb), 0.3);
  --shadow-sm: 0 1px 3px rgba(var(--hula-black-rgb), 0.3);
  --shadow-md: 0 4px 6px rgba(var(--hula-black-rgb), 0.3);
  --shadow-lg: 0 10px 25px rgba(var(--hula-black-rgb), 0.4);

  /* 交互状态 */
  --bg-hover: rgba(var(--hula-white-rgb), 0.05);
  --bg-selected: rgba(19, 152, 127, 0.15);
  --bg-active: rgba(19, 152, 127, 0.2);
  --bg-disabled: var(--hula-brand-primary);

  /* 组件特定变量 */
  --input-bg: var(--hula-brand-primary);
  --input-bg-disabled: var(--hula-brand-primary);
  --input-border: var(--hula-brand-primary);
  --search-bg-color: var(--hula-brand-primary);

  /* 消息系统 */
  --msg-list-bg: var(--hula-brand-primary);
  --msg-hover: var(--hula-brand-primary);
  --msg-active: rgba(19, 152, 127, 0.6);

  /* 聊天气泡 */
  --chat-left-bg: var(--hula-brand-primary);
  --chat-right-bg: var(--hula-brand-primary);
  --chat-text-color: var(--hula-brand-primary);

  /* 头像系统 */
  --avatar-border-color: var(--hula-brand-primary);

  /* 弹窗系统 */
  --popover-bg: var(--hula-brand-primary);
  --modal-bg: rgba(var(--hula-black-rgb), 0.7);

  /* 菜单系统 */
  --menu-bg: linear-gradient(45deg, rgba(33, 33, 33, 0.65) 60%, rgba(33, 33, 33, 0.95) 90%);
  --menu-hover: var(--hula-brand-primary);

  /* 图标系统 */
  --icon-color: var(--hula-brand-primary);
  --icon-color-disabled: var(--hula-brand-primary);
}

/* ==========================================================================
   主题切换过渡
   ========================================================================== */

* {
  transition: background-color var(--transition-base) !important,
              color var(--transition-base) !important,
              border-color var(--transition-base) !important;
}

/* 不参与过渡的元素 */
.no-theme-transition {
  transition: none !important;
}

/* ==========================================================================
   主题特定背景
   ========================================================================== */

/* 默认主题 - 渐变背景 */
:root[data-theme="default"] {
  --right-theme-bg: radial-gradient(
    circle at top left,
    rgba(255, 209, 255, 0.3) 20%,
    rgba(130, 193, 187, 0.3) 100%
  );
}

:root[data-theme="dark"][data-theme-style="default"] {
  --right-theme-bg: radial-gradient(
    circle at top left,
    rgba(19, 152, 127, 0.2) 20%,
    rgba(19, 152, 127, 0.05) 100%
  );
}

/* 简洁主题 - 纯色背景 */
:root[data-theme="simple"] {
  --right-theme-bg: var(--hula-brand-primary);
}

:root[data-theme="dark"][data-theme-style="simple"] {
  --right-theme-bg: var(--hula-brand-primary);
}

/* ==========================================================================
   基础样式重置
   ========================================================================== */

* {
  font-family: var(--font-family), sans-serif !important;
  caret-color: var(--caret-color) !important;
}

html,
body,
svg {
  &::selection {
    background: var(--selection-bg);
  }
  outline: none;
  overscroll-behavior: none;
}

::selection {
  background: var(--selection-bg);
}